<div class="container">

  <!--  <label id="radio-group-label">Pick verb</label>-->
  <!--  <mat-radio-group-->
  <!--    aria-labelledby="radio-group-label"-->
  <!--    class="radio-group"-->
  <!--    [(ngModel)]="chosenVerb">-->
  <!--    <mat-radio-button class="radio-button" *ngFor="let verb of verbs" [value]="verb">-->
  <!--      {{verb}}-->
  <!--    </mat-radio-button>-->
  <!--  </mat-radio-group>-->
  <div>Your chosen options : {{chosenVerb}} {{chosenSubject}} {{chosenGenres | json}} {{topSize}}</div>

  <br>

  <!-- Verb -->
  <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree">

    <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
      <li class="mat-tree-node">
        <!-- use a disabled button to provide padding for tree leaf -->
        <button mat-icon-button disabled></button>
        <mat-radio-button class="radio-button" (click)="click(node.name)" name="verb">
          {{node.name}}
        </mat-radio-button>
      </li>
    </mat-tree-node>

    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
      <li>
        <div class="mat-tree-node">
          <button mat-icon-button matTreeNodeToggle
                  [attr.aria-label]="'toggle ' + node.name">
            <mat-icon class="mat-icon-rtl-mirror">
              {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
            </mat-icon>
          </button>
          {{node.name}}
        </div>
        <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)">
          <ng-container matTreeNodeOutlet></ng-container>
        </ul>
      </li>
    </mat-nested-tree-node>
  </mat-tree>

  <!-- Subject -->
  <mat-tree [dataSource]="subjectDataSource" [treeControl]="treeControl" class="example-tree" *ngIf="chosenVerb">

    <mat-tree-node matTreeNodeToggle *matTreeNodeDef="let node"
                   [class.example-tree-invisible]="!isSubjectAvailable(node.name)">
      <li class="mat-tree-node">
        <!-- use a disabled button to provide padding for tree leaf -->
        <button mat-icon-button disabled></button>
        <mat-radio-button class="radio-button" (click)="chooseSubject(node.name)" name="subject">
          {{node.name}}
        </mat-radio-button>
      </li>
    </mat-tree-node>

    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
      <li>
        <div class="mat-tree-node">
          <button mat-icon-button matTreeNodeToggle
                  [attr.aria-label]="'toggle ' + node.name">
            <mat-icon class="mat-icon-rtl-mirror">
              {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
            </mat-icon>
          </button>
          {{node.name}}
        </div>
        <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)">
          <ng-container matTreeNodeOutlet></ng-container>
        </ul>
      </li>
    </mat-nested-tree-node>

  </mat-tree>

  <!-- Reserved book params -->
  <mat-tree [dataSource]="reservedDataSource" [treeControl]="treeControl" class="example-tree"
            *ngIf="chosenSubject === 'books'">
    <mat-tree-node matTreeNodeToggle *matTreeNodeDef="let node">
      <li class="mat-tree-node">
        <!-- use a disabled button to provide padding for tree leaf -->
        <button mat-icon-button disabled></button>
        <div style="display: flex;flex-direction: row;justify-content: center;align-items: center">
          <mat-checkbox class="mat-checkbox" (click)="addReservedParam(node.name)" name="reservedParams">
            {{node.name}}
          </mat-checkbox>
          <mat-form-field style="margin-left: 20px">
            <mat-label>Select top size</mat-label>
            <mat-select [(value)]="topSize">
              <mat-option>None</mat-option>
              <mat-option value="10">10</mat-option>
              <mat-option value="20">20</mat-option>
              <mat-option value="50">50</mat-option>
              <mat-option value="100">100</mat-option>
              <mat-option value="all">all</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </li>
    </mat-tree-node>

    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
      <li>
        <div class="mat-tree-node">
          <button mat-icon-button matTreeNodeToggle
                  [attr.aria-label]="'toggle ' + node.name">
            <mat-icon class="mat-icon-rtl-mirror">
              {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
            </mat-icon>
          </button>
          {{node.name}}
        </div>
        <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)">
          <ng-container matTreeNodeOutlet></ng-container>
        </ul>
      </li>
    </mat-nested-tree-node>

  </mat-tree>

  <!-- Pages -->
  <ng-container *ngIf="chosenSubject==='books'">
    <label>
      Pages:
      <br>
      <br>
      <mat-form-field>
        <input matInput placeholder="from, e.g. '100'" type="number">
      </mat-form-field>
      <br>
      <mat-form-field>
        <input matInput placeholder="to, e.g. '430'" type="number">
      </mat-form-field>
    </label>
  </ng-container>

  <br>

  <!-- Release date -->
  <ng-container *ngIf="chosenSubject==='books'">
    <label>
      Release date:
      <br>
      <br>
      <mat-form-field>
        <input matInput placeholder="from" type="date" [(ngModel)]="chosenDate">
      </mat-form-field>
      <br>
      <mat-form-field>
        <input matInput placeholder="to" type="date" [(ngModel)]="chosenDate">
      </mat-form-field>
    </label>
  </ng-container>

  <!-- Voters count -->
  <br>

  <ng-container *ngIf="chosenSubject==='books'">
    <label>
      Voters count:
      <br>
      <br>
      <mat-form-field>
        <input matInput placeholder="from" type="number">
      </mat-form-field>
      <br>
      <mat-form-field>
        <input matInput placeholder="to" type="number">
      </mat-form-field>
    </label>
  </ng-container>

  <!--  Genres  -->
  <!--  <mat-tree [dataSource]="genreDataSource" [treeControl]="treeControl" class="example-tree"-->
  <!--            *ngIf="chosenSubject === 'books'">-->
  <!--    <mat-tree-node matTreeNodeToggle *matTreeNodeDef="let node">-->
  <!--      <li class="mat-tree-node">-->
  <!--        &lt;!&ndash; use a disabled button to provide padding for tree leaf &ndash;&gt;-->
  <!--        <button mat-icon-button disabled></button>-->
  <!--        <mat-checkbox class="mat-checkbox" (click)="addGenre(node.name)" name="genreParams">-->
  <!--          {{node.name}}-->
  <!--        </mat-checkbox>-->
  <!--      </li>-->
  <!--    </mat-tree-node>-->

  <!--    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">-->
  <!--      <li>-->
  <!--        <div class="mat-tree-node">-->
  <!--          <button mat-icon-button matTreeNodeToggle-->
  <!--                  [attr.aria-label]="'toggle ' + node.name">-->
  <!--            <mat-icon class="mat-icon-rtl-mirror">-->
  <!--              {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}-->
  <!--            </mat-icon>-->
  <!--          </button>-->
  <!--          {{node.name}}-->
  <!--        </div>-->
  <!--        <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)">-->
  <!--          <ng-container matTreeNodeOutlet></ng-container>-->
  <!--        </ul>-->
  <!--      </li>-->
  <!--    </mat-nested-tree-node>-->

  <!--  </mat-tree>-->

  <!--  Genres with paigator-->
  <div class="genres-container"
       *ngIf="genreDataSource.data && genreDataSource.data[0] && genreDataSource.data[0].children">
    <div *ngFor="let el of genreDataSource.data[0].children | slice:startIndex :endIndex">
      <div class="achievement-row">
        <mat-checkbox class="mat-checkbox" (click)="addGenre(el.name)" name="genreParams">
          {{el.name}}
        </mat-checkbox>
      </div>
      <mat-divider></mat-divider>
    </div>
    <mat-paginator class="paginator" [length]="genreDataSource.data[0].children.length" [pageSize]="pageSize"
                   (page)="getPaginatorData($event)">
    </mat-paginator>
  </div>
</div>



